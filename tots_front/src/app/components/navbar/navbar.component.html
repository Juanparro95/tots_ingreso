<nav class="navbar-premium">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <div class="flex justify-between items-center h-14 w-full">
      <!-- Logo Section -->
      <a routerLink="/" class="hover-lift group flex-shrink-0 h-full" title="Ir al inicio">
        <div class="brand-wrap">
          <img
            class="brand-logo"
            src="https://tots.com.ar/wp-content/uploads/2024/01/Logo-Web-Tots.png"
            alt="TOTS"
          />
        </div>
      </a>

      <!-- Desktop Navigation - Center -->
      <div class="hidden md:flex items-center gap-4 flex-1 justify-center px-4">
        <a
          *ngIf="isLoggedIn"
          routerLink="/spaces"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: false }"
          class="nav-link">
          <i class="pi pi-building mr-2"></i><span>Espacios</span>
        </a>
        <a
          *ngIf="isLoggedIn"
          routerLink="/my-reservations"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: false }"
          class="nav-link">
          <i class="pi pi-calendar mr-2"></i><span>Mis Reservas</span>
        </a>
        <a
          *ngIf="isLoggedIn && isAdmin"
          routerLink="/admin"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: false }"
          class="nav-link">
          <i class="pi pi-shield mr-2"></i><span>Panel Admin</span>
        </a>
      </div>

      <!-- Right Section -->
      <div class="flex items-center gap-2 sm:gap-4 lg:gap-6 flex-shrink-0">
        <!-- User Dropdown - Desktop -->
        <div *ngIf="isLoggedIn" class="hidden lg:block relative">
          <button
            (click)="toggleUserMenu()"
            class="user-trigger flex items-center gap-2 px-2 py-1 rounded-lg hover:bg-slate-100 transition-colors cursor-pointer"
            type="button">
            <div class="w-7 h-7 rounded-full gradient-primary flex items-center justify-center text-white font-semibold text-xs shadow-sm">
              {{ (getCurrentUser()?.name || 'U')[0] }}
            </div>
            <div class="text-left">
              <p class="user-name text-xs font-medium text-slate-700">{{ getCurrentUser()?.name }}</p>
              <span *ngIf="isAdmin" class="inline-flex items-center gap-1">
                <span class="w-1 h-1 bg-emerald-500 rounded-full"></span>
                <span class="text-emerald-600 font-medium" style="font-size: 10px;">Admin</span>
              </span>
            </div>
            <i class="pi pi-chevron-down text-xs text-slate-500" [ngClass]="{'pi-chevron-up': showUserMenu}"></i>
          </button>

          <!-- Dropdown Menu -->
          <div *ngIf="showUserMenu" class="user-dropdown absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50">
            <button
              (click)="logout()"
              class="dropdown-item w-full text-left px-4 py-2 text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2 transition-colors">
              <i class="pi pi-sign-out text-slate-500"></i>
              <span>Cerrar Sesión</span>
            </button>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex items-center gap-2">
          <a
            *ngIf="!isLoggedIn"
            routerLink="/login"
            class="nav-link-auth">
            <span>Iniciar Sesión</span>
            <i class="pi pi-arrow-right text-xs"></i>
          </a>
        </div>

        <!-- Mobile Menu Button -->
        <button
          (click)="toggleMobileMenu()"
          pButton
          type="button"
          pRipple
          class="p-button p-button-text md:hidden"
          [icon]="isMobileMenuOpen ? 'pi pi-times' : 'pi pi-bars'"
          [attr.aria-label]="isMobileMenuOpen ? 'Cerrar menú' : 'Abrir menú'">
        </button>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div
      *ngIf="isMobileMenuOpen"
      class="md:hidden border-t border-gray-200 py-4 space-y-2 animate-in fade-enter bg-gradient-to-b from-white to-slate-50">
      <!-- Mobile User Info -->
      <div *ngIf="isLoggedIn" class="px-4 py-3 border-b border-gray-200 mb-2">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-full gradient-primary flex items-center justify-center text-white font-bold text-sm">
            {{ (getCurrentUser()?.name || 'U')[0] }}
          </div>
          <div>
            <p class="text-sm font-semibold text-slate-900">{{ getCurrentUser()?.name }}</p>
            <span *ngIf="isAdmin" class="inline-flex items-center gap-1 text-xs">
              <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full"></span>
              <span class="text-emerald-700 font-medium">Admin</span>
            </span>
          </div>
        </div>
      </div>

      <a
        *ngIf="isLoggedIn"
        routerLink="/spaces"
        routerLinkActive="active"
        (click)="toggleMobileMenu()"
        class="nav-link-mobile">
        <i class="pi pi-building mr-3"></i>Espacios
      </a>
      <a
        *ngIf="isLoggedIn"
        routerLink="/my-reservations"
        routerLinkActive="active"
        (click)="toggleMobileMenu()"
        class="nav-link-mobile">
        <i class="pi pi-calendar mr-3"></i>Mis Reservas
      </a>

      <button
        *ngIf="isLoggedIn"
        (click)="logout()"
        class="nav-link-mobile text-red-600 hover:bg-red-50 w-full text-left">
        <i class="pi pi-sign-out mr-3"></i>Cerrar Sesión
      </button>

      <div *ngIf="isLoggedIn && isAdmin" class="pt-3 mt-3 border-t border-gray-200">
        <a
          routerLink="/admin"
          (click)="toggleMobileMenu()"
          class="nav-link-mobile">
          <i class="pi pi-shield mr-3"></i>Panel Admin
        </a>
      </div>
    </div>
  </div>
</nav>
